<!doctype html>
<html lang="es">
<%- include('../partials/head.ejs') %>

	<body>
		<%- include('../partials/header.ejs') %>

			<main class="container-fluid">
				<!--Administrador de productos-->
				<section class="row">
					<article class="col-12">
						<h2 class="display-4 text-white bg-info text-center pt-5">Administrador de Productos</h2>
					</article>

					<div class="addSearch">
						<article>
							<a class="btn btn-primary" href="/admin/add">Agregar <ion-icon name="add-circle-outline">
								</ion-icon>
							</a>
						</article>
						<article ">
							     <!-- 				/admin/search_results  ESTA MISMA RUTA (app + admin.js) EN EL FORM							 -->
							<form action=" /admin/search_results" method="GET">
							<input type="search" name="keywords" placeholder="nom. cat. color descr."
								class="searchAdmin">
							<button class="btn btn-primary" type="submit">
								<ion-icon name="search-outline"></ion-icon>
							</button>
							</form>
						</article>
					</div>

					<article class="col-12">
						<div class="table-responsive">
							<table class="table">
								<thead>
									<tr>
										<th scope="col">Id</th>
										<th scope="col">Nombre</th>
										<th scope="col">Imágen</th>
										<th scope="col">Descripción</th>
										<th scope="col">Color</th>
										<th scope="col">Talle</th>
										<th scope="col">Sección</th>
										<th scope="col">Categoría nombre</th>
										<th scope="col">Categoría descripción</th>
										<!-- <th scope="col">Características</th> -->
										<th scope="col">Precio</th>
										<th scope="col">Descuento</th>
										<th scope="col">Ver</th>
										<th scope="col">Editar</th>
										<th scope="col">Borrar</th>
									</tr>
								</thead>
								<tbody>

									<% products1.forEach(index=> { %>
										<tr>
											<td>
												<%= index.id%>
											</td>
											<td>
												<%= index.name%>
											</td>
											<td><a href="/products/productDetail/<%= index.id%>">
													<img class="imgAdmin"
														src="/img/productDetail-splide/<%= index.image[0].file%>" alt=""
														width="100px">
												</a>
											</td>
											<td>
												<%= index.description%>
											</td>
											<td>
												<%= index.color%>
											</td>
											<td>
												<%= index.size%>
											</td>
											<td>
												<!-- Con 	section.name va directo a tabla sections y luego a su name. PUEDE HACERSE PONIENDO sectionId... ENTRANDO DE OTRA FORMA...-->
												<%= index.section.name%>
											</td>
											<td>
												<!-- Con 	section.name va directo a tabla sections y luego a su name. PUEDE HACERSE PONIENDO sectionId... ENTRANDO DE OTRA FORMA...-->
												<%= index.category.name%>
											</td>
											<td>
												<!-- Con 	section.name va directo a tabla sections y luego a su name. PUEDE HACERSE PONIENDO sectionId... ENTRANDO DE OTRA FORMA...-->
												<%= index.category.description%>
											</td>
											<td>
												<%= index.price%>
											</td>
											<td>
												<%= index.discount%>
											</td>
											<td>
												<a href="/products/productDetail/<%= index.id%>">
													<ion-icon class="ion-icon" name="eye-outline"></ion-icon>
												</a>
											</td>
											<td>
												<a href="/admin/edit/<%= index.id%>">
													<ion-icon class="ion-icon" name="construct-outline"></ion-icon>
												</a>
											</td>
											<td>
												<a href="/admin/delete/<%= index.id%>">
													<ion-icon class="ion-icon" name="trash-outline"></ion-icon>
												</a>
											</td>
										</tr>
										<% }); %>

								</tbody>
							</table>
						</div>
					</article>
			</main>
			<!-- THIS IS DEPRECATED. -->
			<!-- 	<script src="https://unpkg.com/ionicons@5.0.0/dist/ionicons.js"></script>
 -->

			<!-- BOTÓN PARA SUBIR ARRIBA -->
			<script>
				//Get the button
				var mybutton = document.getElementById("myBtn");
				// When the user scrolls down 20px from the top of the document, show the button
				window.onscroll = function () { scrollFunction() };
				function scrollFunction() {
					if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
						mybutton.style.display = "block";
					} else {
						mybutton.style.display = "none";
					}
				}
				// When the user clicks on the button, scroll to the top of the document
				function topFunction() {
					document.body.scrollTop = 0;
					document.documentElement.scrollTop = 0;
				}
			</script>
			<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
	</body>

</html>


<!-- 
REPASANDO ARRAYS
index.splideImages[0] USANDO foreach
 PARA ACCEDER A VALORES DE ARRAY,ESTE DEBE TENER NOMBRE (SIN USAR foreach)
products =
    [
        {
            "id": 0,
            "name": "Polera Roja",
            "description": "Polera de mujer Roma",
            "image": "img-producto-polera-rojo1.jpg",
            "splideImages": [
                "img-producto-polera-rojo1.jpg",
                "img-producto-polera-rojo2.jpg",
                "img-producto-polera-rojo3.jpg",
                "img-producto-polera-rojo4.jpg"
            ],
            "category": "Oferta",
            "size": 38,
            "color": "Rojo",
            "price": "3950",
            "discount": 30
        },
        {
            "id": 1,
            "name": "Polera Blanca",
            "description": " Aprovechala YA! Es la última en stock!",
            "image": "img-producto-polera-blanco1.jpg",
            "splideImages": [
                "img-producto-polera-blanco1.jpg",
                "img-producto-polera-blanco2.jpg"
            ],
            "category": "sugest",
            "size": 40,
            "color": "Blanco",
            "price": 1900,
            "discount": 10
        }
    ]
	 -->
<!--                    index.     .splideImages[0] // USANDO foreach, index REPRESENTA CADA ÍNDICE DE ARRAY ITERADO
console.log(products[0].splideImages[0]); // ACCEDIENDO A VALOR DE ARRAY SIN ITERAR
               products[0]                                DEBE NOMBRARSE PRIMERO NOMBRE ARRAY + ÍNDICE QUE SE QUIERE ACCEDER...
                                 .splideImages           ES NOMBRE DEL ÚLTIMO SUBGRUPO DE ÍNDICES
                                                     [0]        ES EL ÍNDICE ESPECÍFICO AL CUAL QUIERO ACCEDER PARA MOSTRAR SU VALOR FINALMENTE
 IMPRIME: img-producto-polera-rojo1.jpg

 -->